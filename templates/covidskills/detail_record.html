{% extends 'covidskills/base-covidskills.html' %}

{# Load the tag library #}
{% load bootstrap4 %}
{% load project_tags %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

{% block content %}

<style>
/* styling of the tabs*/
#exTab1 .tab-content {
  color : black;
  padding : 5px 15px;
}

#exTab1 .nav-tabs > li > a {
  border-radius: 4px 4px 0 0;
}
</style>



<h1>
    Skills Record for {{ recordsheet.recordname }} 
</h1>
<p class="text-muted">{{ recordsheet.cwid }}</p>

{% if request.user|has_group:"record_viewing_privileges" %}
<a type="button" class="btn btn-primary" href="{% url 'covidskills:record-update' recordsheet.pk %}">Update record details</a>

<a type="button" class="btn btn-warning" href="{% url 'covidskills:record-assign' recordsheet.pk %}">Assign individual to project(s)</a>
{% endif %}
</br>
<div class="card my-3">
<div class="card-body">
<h3> Skills:</h3>
{% with recordsheet.skillsets.all as skill_list %}
    {% include "covidskills/table_skills.html" %}
{% endwith %}
</div>
</div>

<div class="card my-3">
<div class="card-body">
<h3>Fields of expertise</h3>
{% with recordsheet.fieldstrained.all as field_list %}
    {% include "covidskills/table_fields.html" %}
{% endwith %}
</div>
</div>

<div class="card my-3">
<div class="card-body">
<table class="table table-striped table-hover">
                <tr>
                    <td>Best number</td>
                    <td>{{ recordsheet.bestnumber }}</td>
                </tr>
                <tr>
                    <td>Supervisor</td>
                    <td>{{ recordsheet.supervisor }}</td>
                </tr>
                <tr>
                    <td>Workload - COVID-related</td>
                    <td>{{ recordsheet.workloadcovid }}</td>
                </tr>
                <tr>
                    <td>Workload - Regular tasks</td>
                    <td>{{ recordsheet.workloadother }}</td>
                </tr>
                <tr>
                    <td>Workload - Availability</td>
                    <td>{{ recordsheet.workloadidle }}</td>
                </tr>
</table>
</div>
</div>

<div class="card my-3">
<div class="card-body">
    <h3>Comments</h3>
    {{ recordsheet.comments }}
</div>
</div>

<div class="card my-3">
<div class="card-body">
<h3>Projects {{ recordsheet.recordname }} is assigned to:</h3>
{% with recordsheet.assignedprojects.all as project_list %}
    {% include "covidskills/table_projects.html" %}
{% endwith %}
</div>
</div>

<div class="card my-2">
<div class="card-body">
<h3>Projects requiring these skillsets</h3>

{% for sk in recordsheet.skillsets.all %}
    <h5>{{ sk.skillname }}:</h5>
    {% with sk.project_set.all as project_list %}
        {% include "covidskills/table_projects.html" %}
    {% endwith %}
{% endfor %}

</div>
</div>

{% if request.user|has_group:"record_viewing_privileges" %}
<a type="button" class="btn btn-primary" href="{% url 'covidskills:record-update' recordsheet.pk %}">Update record details</a>

<a type="button" class="btn btn-warning" href="{% url 'covidskills:record-assign' recordsheet.pk %}">Assign individual to project(s)</a>
{% endif %}

</br></br>



{% endblock %}

